<?xml version="1.0" encoding="UTF-8" ?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="package">

    <select id="select" resultType="PackageCateVo">
    <![CDATA[
        select PackageCate_no,CateName,GroupCode,ParentCode,Depth from PackageCate;
        ]]>
    </select>
    <select id="selectpack" resultType="PackageVo">
    <![CDATA[
        select Package_no,PackageCate_no,Availability,PackageName,Goal,Content,Qualification,TotalTime from Package;
        ]]>
    </select>
    <select id="selectonepack" parameterType="int" resultType="PackageVo">
    <![CDATA[
        select Package_no,PackageCate_no,Availability,PackageName,Goal,Content,Qualification,TotalTime from Package where Package_no=#{no}
        ]]>
    </select>
    <insert id="insert" parameterType="PackageVo" >

    <selectKey keyProperty="Package_no" resultType="Int" order="AFTER">
        <![CDATA[
           select LAST_INSERT_ID() from dual
           ]]>
    </selectKey>
        <![CDATA[
        insert into Package (Package_no,PackageCate_no,Availability,PackageName,Goal,Content,Qualification,TotalTime) values (#{Package_no},#{PackageCate_no},#{Availability},#{PackageName},#{Goal},#{Content},#{Qualification},#{TotalTime});
        ]]>
    </insert>

    <insert id="insertstep" parameterType="StepInPackVo" >

        <selectKey keyProperty="Step_no" resultType="Int" order="AFTER">
            <![CDATA[
           select LAST_INSERT_ID() from dual
           ]]>
        </selectKey>
        <![CDATA[
        insert into StepInPack (Step_no,Package_no,StepName,Level) values (#{Step_no},#{Package_no},#{StepName},#{Level});
        ]]>
    </insert>
    <insert id="insertsub" parameterType="SubInStepVo" >
          <![CDATA[
        insert into SubInStep (Subject_no,Step_no,Content,SubHour) values ('16',#{Step_no},#{Content},#{SubHour});
        ]]>
    </insert>
    <insert id="addcate" parameterType="PackageCateVo" >
        <![CDATA[
        insert into PackageCate (ParentCode,CateName) values (#{PackageCate_no},#{CateName})
        ]]>
    </insert>
    <select id="getstep" parameterType="int">
        <![CDATA[
        select * from StepInPack value ()
        ]]>
    </select>
</mapper>