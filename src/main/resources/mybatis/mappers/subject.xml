<?xml version="1.0" encoding="UTF-8" ?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="subject">

    <!--진현-->
    <insert id="insert" parameterType="SubjectVo" >
        <![CDATA[
        insert into Subject
        (SubjectCate_no,
        SubjectName,
        Outline) values
        (#{SubjectCate_no},
        #{SubjectName},
        #{Outline})
        ]]>
    </insert>
    <select id="listselect" resultType="SubjectCateVo">
        <![CDATA[
        select SubjectCate_no,
        CateName,
        ParentCode
        from
        SubjectCate
        ]]>
    </select>
    <select id="subselect" resultType="SubjectVo">
        <![CDATA[
        select Subject_no,
        SubjectCate_no,
        SubjectName,
        Outline from
        Subject
        ]]>
    </select>
    <!--<select id="mdselect" resultType="MaxdepthVo">-->
        <!--<![CDATA[-->
       <!--select GroupCode,max(Depth) as Depth,max(OrderCode) as OrderCode from SubjectCate group by GroupCode-->
        <!--]]>-->
    <!--</select>-->
    <select id="nselect" resultType="int">
        <![CDATA[
       select SubjectCate_no
       from SubjectCate where
       SubjectCate_no NOT IN
       (select sc.SubjectCate_no
       from SubjectCate sc,
       SubjectCate sc2
       where sc.SubjectCate_no=sc2.ParentCode
       group by sc.SubjectCate_no)
        ]]>
    </select>
    <select id="sub" parameterType="int" resultType="SubjectVo">
        select Subject_no,
        SubjectCate_no,
        SubjectName,
        Outline from
        Subject where
        Subject_no=#{no}
    </select>

    <insert id="addcate" parameterType="SubjectCateVo" >
        <![CDATA[
        insert into
         SubjectCate
         (ParentCode,
         CateName)
         values (#{SubjectCate_no},
         #{CateName})
        ]]>
    </insert>
    <update id="CateUpdate" parameterType="SubjectCateVo">
        <![CDATA[
        UPDATE SubjectCate set
        CateName=#{CateName},
        ParentCode=#{ParentCode}
        where
        SubjectCate_no=#{subjectCate_no}
        ]]>
    </update>

    <update id="SubjectUpdate" parameterType="SubjectCateVo">
        <![CDATA[
        UPDATE Subject set
        SubjectName=#{CateName},
        SubjectCate_no=#{ParentCode}
         where
         Subject_no=#{subjectCate_no}
        ]]>
    </update>
    <!--진현-->
</mapper>