<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="job">

	<!-- 검색 -->
	<!--/*기업정보 리스트 가져오기*/-->
	<select id="jobRequestList" parameterType="com.bitacademy.vo.JobSearchVo" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Company_no, 
					j.Request_no,
					j.Post,
			        j.Black, 
			        j.ReceiptDate,
			        c.CompName,
			        j.MgrName, 
			        j.Field,
			        j.HireCnt,
			        j.Email,
			        j.Employment 
			from JobRequest j, Company c 
			where j.Company_no = c.Company_no
		]]>
		<if test="comCondition == 'post'">
			and j.post = 1
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = 1
		</if>
		<if test="comCondition == 'receiptdate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if>
		
	</select>

	<!-- 지원자 리스트 조회 -->
	<select id="getInterviewList" parameterType="Int" resultType="com.bitacademy.vo.GisuTableVo">
		<![CDATA[
			select  i.Request_no, 
					i.User_no, 
					i.Interview_no, 
					u.NameHan, 
					i.ApplyDate, 
					i.Result
			from Interview i, Users u
			where i.User_no = u.User_no
			and i.Request_no = #{request_no}
		]]>
	</select>
	
	<!-- 두번 클릭 -->
	<!-- 취업의뢰기업 상세정보 가져오기 -->
	<select id="getJobRequest" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			SELECT 
					j.Request_no,
					j.HireCnt,
					j.UseLang,
					j.UseOS,
					j.UseDB,
					j.InterviewDate,
					j.Career,
					j.Requirement,
					j.YearIncome,
					j.Major,
					j.Advantage,
					j.ContractType,
					j.Field,
					j.Procedures,
					j.ReqDocument,
					j.ReqDetail,
					j.Telephone,
					j.Fax,
					j.CellPhone,
					j.Email,
					j.MgrName,
					j.Department,
					j.Position,
					j.Etc,
					j.Post,
					j.Black,
					j.ReceiptDate,
					j.Employment,
				    
				    c.Company_no,
					c.Welfare,
					c.CompName,
					c.StockMarket,
					c.Address,
					c.Tel,
					c.File_no,
					c.Business,
					c.Capital,
					c.YearSell,
					c.StaffCnt,
					c.HomePage,
					c.PostCode,
					c.Introduction,
					c.CompResNum
			FROM JobRequest j, Company c
			where j.Company_no = c.Company_no
			and j.Request_no = #{Request_no}
		]]>
	</select>
</mapper>