<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="job">

	<!-- 검색 -->
	<!--/*기업정보 리스트 가져오기*/-->
	<select id="getJobRequestList" parameterType="com.bitacademy.vo.JobCriteriaVo" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select *
			from JobRequest j, Company c 
			where j.Company_no = c.Company_no
		]]>	
		
		<if test="comCondition == 'isShow'">
			and j.isShow = '1'
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = '1'
		</if>
		<if test="comCondition == 'receiptDate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = '1'
		</if>
		<!-- <if test="sidx==null or sidx.equals('')">
			order by ReceiptDate desc
		</if> -->
		<if test="sidx!=null and !sidx.equals('')">
			order by ${sidx} ${sord}
		</if>
		<![CDATA[
			limit #{startNum}, #{rows}
		]]>	
	
	</select>
	
	<!-- 취업의뢰 전체 카운트 -->
	<select id="getJobRequestTotalCnt" parameterType="com.bitacademy.vo.JobCriteriaVo" resultType="Int">
		<![CDATA[
			select count(*)
			from JobRequest j, Company c 
			where j.Company_no = c.Company_no
		]]>	
		
		<if test="comCondition == 'isShow'">
			and j.isShow = '1'
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = '1'
		</if>
		<if test="comCondition == 'receiptDate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = '1'
		</if>
		
	</select>
		
		
<!-- 	
<if test="sidx!=null and !sidx.equals('')">
			order by ${sidx} asc
		</if>
		

	<if test="comCondition == 'isShow'">
			and j.isShow = '1'
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = '1'
		</if>
		<if test="comCondition == 'receiptDate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if>
		<![CDATA[	
			order by receiptDate desc
		]]> -->
		
		<!-- <![CDATA[
			select  j.Company_no, 
					j.Request_no,
					j.Post,
			        j.Black, 
			        j.ReceiptDate,
			        c.CompName,
			        j.MgrName, 
			        j.Field,
			        j.HireCnt,
			        j.Email,
			        j.Employment 
			from JobRequest j, Company c 
			where j.Company_no = c.Company_no
		]]>
		<if test="comCondition == 'post'">
			and j.post = 1
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = 1
		</if>
		<if test="comCondition == 'receiptdate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if> -->
		
	
	
	<!-- 두번 클릭 -->
	<!-- 취업의뢰기업 상세정보 가져오기 -->
	<select id="getCompany" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			SELECT  c.Company_no,
					c.Welfare,
					c.CompName,
					c.StockMarket,
					c.Address,
					c.Tel,
					c.File_no,
					c.Business,
					c.Capital,
					c.YearSell,
					c.StaffCnt,
					c.HomePage,
					c.PostCode,
					c.Introduction,
					c.CompResNum,
					c.OpenDate
			FROM Company c
			where c.Company_no = #{company_no}
		]]>
	</select>
	
	<!-- 특정기업 취업의뢰 리스트 -->
	<select id="getJobRequestListByComNo" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Request_no,
					j.Company_no,
					j.HireCnt,
					j.UseLang,
					j.UseOS,
					j.UseDB,
					j.InterviewDate,
					j.Career,
					j.ReqDocument,
					j.YearIncome,
					j.Major,
					j.Advantage,
					j.ContractType,
					j.Field,
					j.Procedures,
					j.ReqDocument,
					j.ReqDetail,
					j.Telephone,
					j.Fax,
					j.Cellphone,
					j.Email,
					j.MgrName,
					j.Department,
					j.Position,
					j.Etc,
					j.Post,
					j.Black,
					j.ReceiptDate,
					j.Employment
			from JobRequest j
			where j.Company_no = #{company_no};
		]]>
	</select>
		
	<!-- 취업의뢰정보-->	
	<select id="getJobRequest" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.request_no;
					j.company_no,
					j.hireCnt,
					j.useLang,
					j.useOS,
					j.useDB,
					
					j.interviewDate,
					j.career,
					j.requirement,
					j.yearIncome,
					j.major,
					j.advantage,
					j.contractType,
					j.field,
					j.procedures,
					j.reqDocument,
					j.reqDetail,
					j.telephone,
					j.fax,
					j.cellPhone,
					j.email,
					j.mgrName,
					j.department,
					j.position,
					j.etc,
					j.post,
					j.black,
					j.receiptDate,
					j.employment,
					j.workPlace,
					j.majorBiz,
					j.employmentPosition 
			from JobRequest j
			where j.Request_no = #{request_no}
		]]>
	</select>
	
	
	
	
	<!-- 지원자 리스트 조회 -->
	<select id="getInterviewList" parameterType="Int" resultType="com.bitacademy.vo.GisuTableVo">
		<![CDATA[
			select  i.Request_no, 
					i.User_no, 
					i.Interview_no, 
					u.NameHan, 
					i.ApplyDate, 
					i.Result
			from Interview i, Users u
			where i.User_no = u.User_no
			and i.Request_no = #{request_no}
		]]>
	</select>
	
	
	<!-- 취업의뢰리스트 한번클릭했을때  -->
	<!-- <select id="getJobRequest" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Field,
					j.ReceiptDate,
					j.Post,
					j.Recruitment,
					j.ContractType,
					j.WorkPlace,
					j.MajorBiz,
					j.UseOS,
					j.UseDB,
					j.UseLang,
					j.UserETC,
					j.EmployPosition,
					j.Major,
					j.Advantage,
					j.Procedures,
					j.ReqDocument,
					j.ReqDetail,
					j.MrgName,
					j.Department,
					j.Position,
					j.Telephone,
					j.CellPhone,
					j.Fax,
					j.Email
			from JobRequest 
			where j.Request_no = #{request_no}
			
		]]> -->
	<!-- </select> -->
</mapper>