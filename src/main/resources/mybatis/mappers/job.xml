<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="job">

	<!-- 검색 -->
	<!--/*기업정보 리스트 가져오기*/-->
	<select id="jobRequestList" parameterType="com.bitacademy.vo.JobSearchVo" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Company_no, 
					j.Request_no,
					j.Post,
			        j.Black, 
			        j.ReceiptDate,
			        c.CompName,
			        j.MgrName, 
			        j.Field,
			        j.HireCnt,
			        j.Email,
			        j.Employment 
			from JobRequest j, Company c 
			where j.Company_no = c.Company_no
		]]>
		<if test="comCondition == 'post'">
			and j.post = 1
		</if>
		<if test="comCondition == 'employment'">
			and j.employment = 1
		</if>
		<if test="comCondition == 'receiptdate'">
			and j.receiptDate between #{startDate} and #{endDate}
		</if>
		
	</select>

	
	
	<!-- 두번 클릭 -->
	<!-- 취업의뢰기업 상세정보 가져오기 -->
	<select id="getCompany" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			SELECT  c.Company_no,
					c.Welfare,
					c.CompName,
					c.StockMarket,
					c.Address,
					c.Tel,
					c.File_no,
					c.Business,
					c.Capital,
					c.YearSell,
					c.StaffCnt,
					c.HomePage,
					c.PostCode,
					c.Introduction,
					c.CompResNum,
					c.OpenDate
			FROM Company c
			where c.Company_no = #{company_no}
		]]>
	</select>
	
	<!-- 특정기업 취업의뢰 리스트 -->
	<select id="getJobRequestListByComNo" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Request_no,
					j.Company_no,
					j.HireCnt,
					j.UseLang,
					j.UseOS,
					j.UseDB,
					j.InterviewDate,
					j.Career,
					j.ReqDocument,
					j.YearIncome,
					j.Major,
					j.Advantage,
					j.ContractType,
					j.Field,
					j.Procedures,
					j.ReqDocument,
					j.ReqDetail,
					j.Telephone,
					j.Fax,
					j.Cellphone,
					j.Email,
					j.MgrName,
					j.Department,
					j.Position,
					j.Etc,
					j.Post,
					j.Black,
					j.ReceiptDate,
					j.Employment
			from JobRequest j
			where j.Company_no = #{company_no};
		]]>
	</select>
		
	<!-- 취업의뢰정보-->	
	<select id="getJobRequest" parameterType="Int" resultType="com.bitacademy.vo.JobVo">
		<![CDATA[
			select  j.Request_no,
					j.HireCnt,
					j.UseLang,
					j.UseOS,
					j.UseDB,
					j.InterviewDate,
					j.Career,
					j.ReqDocument,
					j.YearIncome,
					j.Major,
					j.Advantage,
					j.ContractType,
					j.Field,
					j.Procedures,
					j.ReqDocument,
					j.ReqDetail,
					j.Telephone,
					j.Fax,
					j.Cellphone,
					j.Email,
					j.MgrName,
					j.Department,
					j.Position,
					j.Etc,
					j.Post,
					j.Black,
					j.ReceiptDate,
					j.Employment,
			        c.Company_no,
			        c.Welfare,
			        c.CompName,
			        c.StockMarket,
			        c.Address,
			        c.Tel,
			        c.File_no,
			        c.Business,
			        c.Capital,
			        c.YearSell,
			        c.StaffCnt,
			        c.HomePage,
			        c.PostCode,
			        c.Introduction,
			        c.CompResNum
			from JobRequest j, Company c
			where j.Company_no = c.Company_no
			and j.Request_no = #{request_no};	
		]]>
	</select>
	
	
	
	
	<!-- 지원자 리스트 조회 -->
	<select id="getInterviewList" parameterType="Int" resultType="com.bitacademy.vo.GisuTableVo">
		<![CDATA[
			select  i.Request_no, 
					i.User_no, 
					i.Interview_no, 
					u.NameHan, 
					i.ApplyDate, 
					i.Result
			from Interview i, Users u
			where i.User_no = u.User_no
			and i.Request_no = #{request_no}
		]]>
	</select>
</mapper>