<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="completion">

<select id="getValStudent" resultType="com.bitacademy.vo.UsersVo">

<![CDATA[
		select * from Users 
				 where curriculum.workType=WorkType,
				 	   curriculum.curriName=CurriName,
				 	   curriculum.state=State;
	]]>

</select>

<select id="getCompletionStudent" parameterType="int" resultType="com.bitacademy.vo.ApplyUserVo">

<![CDATA[

	   select Users.User_no, Gisu.GisuName,Users.NameHan, Users.BirthDate,
	   		  ApplyInfo.State,Users.Handphone,ApplyInfo.ApplyDay, ApplyInfo.TestDay,
	   		  UserScholarship.School, UserScholarship.Major,
	   		  ApplyInfo.Deposit
       
	   from ApplyInfo  
	
	   join Users on Users.User_no = ApplyInfo.User_no
	   join UserScholarship on Users.User_no = UserScholarship.User_no
	   join Curriculum on ApplyInfo.Curriculum_no = Curriculum.Curriculum_no
	   join Gisu on Curriculum.Curriculum_no = Gisu.Curriculum_no
	   
	   where Curriculum.Curriculum_no = #{curriculum_no};

	]]>

</select>

<select id="afterServiceList" parameterType="int" resultType="com.bitacademy.vo.AfterServiceVo">

<![CDATA[
		
	   select AfterService.CompName,AfterService.PeriodFr,AfterService.PeriodTo,AfterService.State,
	   		  AfterService.afterService_no,Users.User_no
	   		  
	   from AfterService  
	
	   join Users on Users.User_no = AfterService.User_no
	   
	   where Users.User_no = #{user_no};
	]]>

</select>

<select id="afterService_details" parameterType="map" resultType="com.bitacademy.vo.AfterServiceVo">

<![CDATA[
            
	  select AfterService.CompName,Company.Tel,AfterService.PeriodFr,
			 AfterService.PeriodTo,AfterService.Position,AfterService.Department,
			 AfterService.State,Company.Address
	
	  from AfterService as AfterService

	  join Users as Users on AfterService.User_no = Users.User_no
      join Interview as Interview on Users.User_no = Interview.User_no
      join Company as Company on Interview.Commpany_no = Company.Commpany_no 

	  where AfterService.AfterService_no = #{afterService_no} and AfterService.User_no = #{user_no};
	
	]]>

</select>

</mapper>