<?xml version="1.0" encoding="UTF-8" ?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="class">

    <!--업무구분에 카테코리 이름을 불러오는 쿼리-->
    <select id="getCateName" resultType="String">
        <![CDATA[
        SELECT CateName from CurriculumCate group by CateName
        ]]>
    </select>

    <!--업무구분에 따라 커리큘럼 리스트를 불러오는 쿼리-->
    <select id="getCurriList" parameterType="String" resultType="CurriculumVo">
        <![CDATA[
         select Curriculum_no, CurriName from Curriculum C
  			join CurriculumCate C2 on C.CurriculumCate_no = C2.CurriculumCate_no and C2.CateName=#{workType}
        ]]>
    </select>

    <!--교육과정검색에 조회버튼을 누르면 커리큘럼 정보는 불러오는 쿼리-->
    <select id="getCurriInfo" parameterType="Int" resultType="CurriculumVo">
        <![CDATA[
        select CurriName, StartDate, EndDate from Curriculum where Curriculum_no=#{curriculum_no};
        ]]>
    </select>

    <!--디비의 현재 날짜를 가져오는 쿼리-->
    <select id="getDate" resultType="String">
        <![CDATA[
        select current_date
            from dual
        ]]>
    </select>

    <!--파일이 저장되는 디렉토리 이름을 가져가는 쿼리-->
    <select id="getSubjectNoForDirGen" parameterType="Int" resultType="HashMap">
        <![CDATA[
        select g.GisuName, sis.Subject_no
            from SubInStep sis
            join StepInPack sip on sis.Step_no = sip.Step_no
            join Package p on sip.Package_no = p.Package_no
            join Curriculum c on p.Package_no = c.Package_no
            join Gisu g on c.Curriculum_no = g.Curriculum_no
            where sis.SubInStep_no=#{sisNo}
        ]]>
    </select>

</mapper>
