<?xml version="1.0" encoding="UTF-8" ?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="score">

<select id="getSubjectList" parameterType="Int" resultType="ScoreVo">
    <![CDATA[
      select SubInStep_no, SubjectName
      from v_subject
      where Step_no
            in (select Step_no
                from StepInPack
                where Package_no=(select Package_no
                                  from Curriculum
                                  where Curriculum_no=#{curriculum_no}))
    ]]>
</select>

    <select id="getSutudentInScore" parameterType="ScoreVo" resultType="ScoreVo">
        <![CDATA[
        select u.User_no, u.NameHan
        from Users u, ApplyInfo a
        where a.User_no=u.User_no
               and a.Curriculum_no=#{curriculum_no}
               and a.State='비트생'
        ]]>
    </select>

    <insert id="saveScore" parameterType="ScoreVo">
        <![CDATA[
        insert into Score(Curriculum_no, SubInStep_no, User_no, Score)
        values (#{curriculum_no}, #{subInStep_no}, #{user_no}, #{score})
        ]]>
    </insert>

</mapper>
